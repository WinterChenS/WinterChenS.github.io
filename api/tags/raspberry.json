{"name":"raspberry","postlist":[{"title":"树莓派 docker 运行 mysql","slug":"2020-03-31-raspberry-docker-mysql","date":"2020-03-31T10:03:00.000Z","updated":"2022-12-01T01:32:39.783Z","comments":true,"top":null,"path":"api/articles/2020-03-31-raspberry-docker-mysql.json","excerpt":null,"keywords":"java,spring,springboot,springcloud,mybatis,jQuery,html,css","cover":"https://cdn.jsdelivr.net/gh/WinterChenS/img/posts/1628046443720062.png","content":"<blockquote>\n<p>树莓派上运行docker是不同于其他平台，树莓派属于arm32架构，经过前期的踩坑，在树莓派中运行docker镜像需要注意镜像对于doker的支持，在官方镜像搜索页是有系统架构作为删选的，如果需要运行arm32架构的镜像，需要使用对应的版本。</p>\n</blockquote>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><ul>\n<li>树莓派4B</li>\n<li>docker</li>\n<li>docker-compose</li>\n</ul>\n<h2 id=\"使用镜像\"><a href=\"#使用镜像\" class=\"headerlink\" title=\"使用镜像\"></a>使用镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">hypriot&#x2F;rpi-mysql<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">.<br>│  .env<br>│  docker-compose.yml<br>│<br>└─mysql<br>    ├─config<br>    │      my.cnf<br>    │<br>    └─data<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"docker-compose-yml\"><a href=\"#docker-compose-yml\" class=\"headerlink\" title=\"docker-compose.yml\"></a>docker-compose.yml</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">version: &#39;3&#39;<br><br>services:<br>  mysql-db:<br>    container_name: mysql-docker        # 指定容器的名称<br>    image: hypriot&#x2F;rpi-mysql                   # 指定镜像和版本<br>    ports:<br>      - &quot;3306:3306&quot;<br>    restart: always<br>    environment:<br>      MYSQL_ROOT_PASSWORD: $&#123;MYSQL_ROOT_PASSWORD&#125;<br>      MYSQL_ROOT_HOST: $&#123;MYSQL_ROOT_HOST&#125;<br>    volumes:<br>      - &quot;$&#123;MYSQL_DIR&#125;&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql&quot;           # 挂载数据目录<br>      - &quot;$&#123;MYSQL_DIR&#125;&#x2F;config:&#x2F;etc&#x2F;mysql&#x2F;conf.d&quot;      # 挂载配置文件目录<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\".env\"></a>.env</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">MYSQL_ROOT_PASSWORD&#x3D;root<br>MYSQL_ROOT_HOST&#x3D;%<br><br>MYSQL_DIR&#x3D;.&#x2F;mysql<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"my-cnf\"><a href=\"#my-cnf\" class=\"headerlink\" title=\"my.cnf\"></a>my.cnf</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">[mysqld]<br>character-set-server&#x3D;utf8mb4<br>default-time-zone&#x3D;&#39;+8:00&#39;<br>innodb_rollback_on_timeout&#x3D;&#39;ON&#39;<br>max_connections&#x3D;500<br>innodb_lock_wait_timeout&#x3D;500<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h2><p>在根目录(docker-compose.yml所在目录)</p>\n<p>启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">dokcer-compose up -d<br></code></pre></td></tr></table></figure>\n\n<p>停止</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">docker-compose stop<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"源码地址\"><a href=\"#源码地址\" class=\"headerlink\" title=\"源码地址\"></a>源码地址</h2><p><a href=\"https://github.com/WinterChenS/docker-compose-simple\" target=\"_blank\" rel=\"noopener\">源码地址</a></p>\n","raw":null,"categories":[{"name":"Raspberry","path":"api/categories/Raspberry.json"}],"tags":[{"name":"docker","path":"api/tags/docker.json"},{"name":"raspberry","path":"api/tags/raspberry.json"},{"name":"mysql","path":"api/tags/mysql.json"},{"name":"arm","path":"api/tags/arm.json"}]},{"title":"树莓派 docker 运行 redis","slug":"2020-03-31-raspberry-docker-redis","date":"2020-03-31T10:09:00.000Z","updated":"2022-12-01T01:32:39.783Z","comments":true,"top":null,"path":"api/articles/2020-03-31-raspberry-docker-redis.json","excerpt":null,"keywords":"java,spring,springboot,springcloud,mybatis,jQuery,html,css","cover":"https://cdn.jsdelivr.net/gh/WinterChenS/img/posts/1628046444727875.png","content":"<blockquote>\n<p>树莓派上运行docker是不同于其他平台，树莓派属于arm32架构，经过前期的踩坑，在树莓派中运行docker镜像需要注意镜像对于doker的支持，在官方镜像搜索页是有系统架构作为删选的，如果需要运行arm32架构的镜像，需要使用对应的版本。</p>\n</blockquote>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><ul>\n<li>树莓派4B</li>\n<li>docker</li>\n<li>docker-compose</li>\n</ul>\n<h2 id=\"使用镜像\"><a href=\"#使用镜像\" class=\"headerlink\" title=\"使用镜像\"></a>使用镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">arm32v7&#x2F;redis<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">.<br>│  .env<br>│  docker-compose.yml<br>│<br>└─redis<br>    └─config<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"docker-compose-yml\"><a href=\"#docker-compose-yml\" class=\"headerlink\" title=\"docker-compose.yml\"></a>docker-compose.yml</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">version: &#39;3&#39;<br><br>services:<br>  redis:<br>    container_name: reids-docker        # 指定容器的名称<br>    image: arm32v7&#x2F;redis                   # 指定镜像和版本,如果是树莓派，必须选择对应架构版本的镜像，不然无法运行<br>    restart: always<br>    command: --appendonly yes<br>    ports:<br>      - &quot;6379:6379&quot;<br>    volumes:<br>      - &quot;$&#123;REDIS_DIR&#125;&#x2F;data:&#x2F;data&quot;           # 挂载数据目录<br>      - &quot;$&#123;REDIS_DIR&#125;&#x2F;config&#x2F;redis.conf:&#x2F;usr&#x2F;local&#x2F;etc&#x2F;redis&#x2F;redis.conf&quot;      # 挂载配置文件目录<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\".env\"></a>.env</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">REDIS_DIR&#x3D;.&#x2F;redis<br></code></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h2><p>在根目录(docker-compose.yml所在目录)</p>\n<p>启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">dokcer-compose up -d<br></code></pre></td></tr></table></figure>\n\n<p>停止</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">docker-compose stop<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"源码地址\"><a href=\"#源码地址\" class=\"headerlink\" title=\"源码地址\"></a>源码地址</h2><p><a href=\"https://github.com/WinterChenS/docker-compose-simple\" target=\"_blank\" rel=\"noopener\">源码地址</a></p>\n","raw":null,"categories":[{"name":"Raspberry","path":"api/categories/Raspberry.json"}],"tags":[{"name":"docker","path":"api/tags/docker.json"},{"name":"raspberry","path":"api/tags/raspberry.json"},{"name":"arm","path":"api/tags/arm.json"},{"name":"redis","path":"api/tags/redis.json"}]}]}