{"title":"layui完美分页，ajax请求分页（真分页） 【2.0版本】","slug":"layui-page-2.0","date":"2017-10-25T12:55:00.000Z","updated":"2022-12-01T01:32:39.787Z","comments":true,"path":"api/articles/layui-page-2.0.json","excerpt":" [Figure] 注意使用的layui版本为：layui-v2.0以上版本，如果v1.0版本请看我另外一篇博客  《layui完美分页，ajax请求分页（真分页）》","covers":["data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="],"cover":"https://cdn.jsdelivr.net/gh/WinterChenS/img/posts/1628046774996940.jpg","content":"<p><img   class=\"lazyload\" data-original=\"https://cdn.jsdelivr.net/gh/WinterChenS/img/posts/1628046775186684.jpg\" src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\"  alt=\"\"></p>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><p><strong>使用的layui版本为：layui-v2.0以上版本，如果v1.0版本请看我另外一篇博客 <a href=\"https://winterchens.github.io/2017/10/25/layui-page-1.0/\" target=\"_blank\" rel=\"noopener\"> 《layui完美分页，ajax请求分页（真分页）》</a></strong></p>\n<a id=\"more\"></a>\n\n<p>最近因为以为学者在看了我上一篇关于layui分页的博客遇到了问题，原因是因为使用了新版本2.x，导致有一些属性改变了，所以出了这篇新版本的博客，本文是根据上一篇博客改变而成，如有疑问请联系我 email：<a href=\"mailto:1085143002@qq.com\">1085143002@qq.com</a></p>\n<h3 id=\"完整代码：\"><a href=\"#完整代码：\" class=\"headerlink\" title=\"完整代码：\"></a>完整代码：</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">%@</span> <span class=\"hljs-attr\">page</span> <span class=\"hljs-attr\">language</span>=<span class=\"hljs-string\">\"java\"</span> <span class=\"hljs-attr\">contentType</span>=<span class=\"hljs-string\">\"text/html; charset=UTF-8\"</span> <span class=\"hljs-attr\">pageEncoding</span>=<span class=\"hljs-string\">\"UTF-8\"</span>%&gt;</span><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"en\"</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"UTF-8\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"renderer\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"webkit\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">\"X-UA-Compatible\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"IE=edge,chrome=1\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1, maximum-scale=1\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"apple-mobile-web-app-status-bar-style\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"black\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"apple-mobile-web-app-capable\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"yes\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"format-detection\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"telephone=no\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span>  <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"icon\"</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"static/images/titleLogo.png\"</span>  /&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>门店管理后台<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"stylesheet\"</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"static/layui/plugins/layui/css/layui.css\"</span> <span class=\"hljs-attr\">media</span>=<span class=\"hljs-string\">\"all\"</span> /&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"static/css/reset.css\"&gt;</span><br><span class=\"hljs-comment\">    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"static/css/commend.css\"&gt; --&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;link rel=\"stylesheet\" href=\"static/css/jqpagination.css\" /&gt; --&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"static/css/shopCustomerManager.css\"&gt; --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"static/js/jquery-3.1.1.min.js\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"static/layui/plugins/layui/layui.js\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;script type=\"text/javascript\" src=\"static/js/jquery.jqpagination.js\"&gt;&lt;/script&gt; --&gt;</span><br>   \t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span>&gt;</span><br><span class=\"javascript\">\t   \t$(<span class=\"hljs-built_in\">document</span>).ready(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;</span><br><span class=\"actionscript\">\t   \t\t  <span class=\"hljs-comment\">//ajax请求后台数据</span></span><br>\t\t      getShopCustomerManagePageInfo();<br>\t\t      <br>\t\t<br><span class=\"actionscript\">\t   \t\t  <span class=\"hljs-comment\">//点击搜索时 搜索数据</span></span><br><span class=\"javascript\">\t   \t\t  $(<span class=\"hljs-string\">\"#selectButton\"</span>).click(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123; </span><br>\t   \t\t\tgetShopCustomerManagePageInfo();<br><span class=\"actionscript\">\t   \t\t\tcurrentPageAllAppoint = <span class=\"hljs-number\">1</span>; <span class=\"hljs-comment\">//当点击搜索的时候，应该回到第一页</span></span><br><span class=\"actionscript\">\t   \t\t\ttoPage();<span class=\"hljs-comment\">//然后进行分页的初始化</span></span><br>\t   \t\t\t<br>\t   \t      &#125;)<br>\t   \t   toPage();<br>\t   \t&#125;);<br>\t   \t<br><span class=\"actionscript\">\t  \t<span class=\"hljs-comment\">//分页参数设置 这些全局变量关系到分页的功能</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> startAllAppoint = <span class=\"hljs-number\">0</span>;<span class=\"hljs-comment\">//开始页数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> limitAllAppoint = <span class=\"hljs-number\">10</span>;<span class=\"hljs-comment\">//每页显示数据条数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> currentPageAllAppoint = <span class=\"hljs-number\">1</span>;<span class=\"hljs-comment\">//当前页数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> dataLength = <span class=\"hljs-number\">0</span>;<span class=\"hljs-comment\">//数据总条数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-comment\">//ajax请求后台数据</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getShopCustomerManagePageInfo</span><span class=\"hljs-params\">()</span></span>&#123;</span><br><span class=\"javascript\">\t   \t\t$.ajax(&#123;</span><br><span class=\"actionscript\">\t   \t\t\ttype:<span class=\"hljs-string\">\"post\"</span>,</span><br><span class=\"javascript\">\t   \t\t\t<span class=\"hljs-keyword\">async</span>:<span class=\"hljs-literal\">false</span>,</span><br><span class=\"actionscript\">\t   \t\t\turl:<span class=\"hljs-string\">\"list_shop_customers_info\"</span>,</span><br><span class=\"javascript\">\t   \t\t\tdata:&#123;<span class=\"hljs-attr\">start</span>:startAllAppoint, <span class=\"hljs-attr\">limit</span>:limitAllAppoint,<span class=\"hljs-attr\">selectValue</span>:$(<span class=\"hljs-string\">\"#selectValue\"</span>).val()&#125;,</span><br><span class=\"actionscript\">\t   \t\t\tsuccess:<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(data,status)</span></span>&#123;</span><br><span class=\"javascript\">\t   \t\t\t\tdata=<span class=\"hljs-built_in\">eval</span>(<span class=\"hljs-string\">\"(\"</span>+data+<span class=\"hljs-string\">\")\"</span>);</span><br>\t   \t\t\t\tgetShopCustomesInfo(data.root);<br><span class=\"actionscript\">\t   \t\t\t\tstartAllAppoint = data.currentResult;<span class=\"hljs-comment\">//当前页数(后台返回)</span></span><br><span class=\"actionscript\">\t   \t\t\t\tdataLength  = data.total;<span class=\"hljs-comment\">//数据总条数</span></span><br>\t   \t\t\t&#125;<br>\t   \t\t&#125;);<br>\t   \t\t<br>\t   \t&#125;<br>\t   \t<br>\t   <br>\t   \t<br><span class=\"actionscript\">\t   \t<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getShopCustomesInfo</span><span class=\"hljs-params\">(data)</span></span>&#123;</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\tvar s = \"<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>姓名<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>性别<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>电话<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>备案楼盘<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>已成交<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>归属经纪人<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>添加时间<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span>\";</span></span><br><span class=\"javascript\">\t   \t\t$.each(data,<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">v,o</span>)</span>&#123;</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\t\t\ts+='<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>'+o.cusName+'<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span>';</span></span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.cusSex+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.phone+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.records+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.alreadyDeal+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.theMedi+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\t\t\ts+='<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>'+o.addTime+'<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span>';</span></span><br>\t   \t\t&#125;);<br><br>\t   \t\tif(data.length&gt;0)&#123;<br><span class=\"javascript\">\t   \t\t\t$(<span class=\"hljs-string\">\"#t_customerInfo\"</span>).html(s);</span><br><span class=\"actionscript\">\t   \t\t&#125;<span class=\"hljs-keyword\">else</span>&#123;</span><br><span class=\"javascript\">\t   \t\t\t$(<span class=\"hljs-string\">\"#page1\"</span>).hide();</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\t\t$(\"#t_customerInfo\").html(\"<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>/&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">'width:10%;height:30px;display:block;margin:0 auto;'</span>&gt;</span>暂无数据<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\");</span></span><br>\t   \t\t&#125;<br>\t   \t\t<br>\t   \t\t<br>\t   \t&#125;<br>   \t\t<br>\t   \t<br>\t   \t<br><span class=\"actionscript\">\t   \t<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toPage</span><span class=\"hljs-params\">()</span></span>&#123;</span><br>\t   \t\t<br><span class=\"actionscript\">\t   \t\tlayui.use([<span class=\"hljs-string\">'form'</span>, <span class=\"hljs-string\">'laypage'</span>, <span class=\"hljs-string\">'layedit'</span>,<span class=\"hljs-string\">'layer'</span>, <span class=\"hljs-string\">'laydate'</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span> </span>&#123;</span><br><span class=\"actionscript\">\t\t\t\t<span class=\"hljs-keyword\">var</span> form = layui.form(),</span><br>\t\t\t\t\tlayer = layui.layer,<br>\t\t\t\t\tlayedit = layui.layedit,<br>\t\t\t\t\tlaydate = layui.laydate,<br>\t\t\t\t\tlaypage = layui.laypage;<br>\t\t\t\t<br><span class=\"actionscript\">\t\t\t\t<span class=\"hljs-keyword\">var</span> nums = <span class=\"hljs-number\">10</span>;</span><br><span class=\"actionscript\">\t\t\t\t<span class=\"hljs-comment\">//调用分页</span></span><br>\t\t\t\t  laypage(&#123;<br><span class=\"actionscript\">\t\t\t\t    cont: <span class=\"hljs-string\">'paged'</span></span><br><span class=\"actionscript\">\t\t\t\t    ,count: dataLength <span class=\"hljs-comment\">//这个是后台返回的数据的总条数</span></span><br><span class=\"actionscript\">\t\t\t\t    ,limit: limitAllAppoint   <span class=\"hljs-comment\">//每页显示的数据的条数,layui会根据count，limit进行分页的计算</span></span><br>\t\t\t\t    ,curr: currentPageAllAppoint<br><span class=\"actionscript\">\t\t\t\t    ,skip: <span class=\"hljs-literal\">true</span></span><br><span class=\"actionscript\">\t\t\t\t    ,jump: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(obj, first)</span></span>&#123;</span><br>\t\t\t\t    \t<br>\t\t\t\t    \tcurrentPageAllAppoint = obj.curr;<br>\t\t\t\t    \tstartAllAppoint = (obj.curr-1)*obj.limit;<br><span class=\"actionscript\">\t\t\t\t      <span class=\"hljs-comment\">//document.getElementById('biuuu_city_list').innerHTML = render(obj, obj.curr);</span></span><br><span class=\"actionscript\">\t\t\t\t      <span class=\"hljs-keyword\">if</span>(!first)&#123; <span class=\"hljs-comment\">//一定要加此判断，否则初始时会无限刷新</span></span><br><span class=\"actionscript\">\t\t\t\t      getShopCustomerManagePageInfo();<span class=\"hljs-comment\">//一定要把翻页的ajax请求放到这里，不然会请求两次。</span></span><br><span class=\"actionscript\">\t\t\t\t          <span class=\"hljs-comment\">//location.href = '?page='+obj.curr;</span></span><br>\t\t\t\t        &#125;<br>\t\t\t\t    &#125;<br>\t\t\t\t  &#125;);<br>\t\t\t\t<br>\t\t\t\t<br>\t\t\t&#125;);<br>\t   \t&#125;;<br>\t   \t<br>   \t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"admin-main\"</span>&gt;</span><br>\t<br>\t<br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">blockquote</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-elem-quote\"</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-form\"</span> <span class=\"hljs-attr\">action</span>=<span class=\"hljs-string\">\"\"</span> &gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-form-item\"</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-input-inline\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text\"</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"selectValue\"</span> <span class=\"hljs-attr\">lay-verify</span>=<span class=\"hljs-string\">\"required\"</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"客户姓名，电话\"</span> <span class=\"hljs-attr\">autocomplete</span>=<span class=\"hljs-string\">\"off\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-input\"</span>&gt;</span><br>\t\t\t    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-btn\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"button\"</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"selectButton\"</span>&gt;</span>搜索<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"shop_customer_manager_page_info\"</span>&gt;</span>显示所有客户<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">blockquote</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fieldset</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-elem-field\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">legend</span>&gt;</span>客户列表<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">legend</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-field-box layui-form\"</span>&gt;</span><br>\t\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">table</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-table admin-table\"</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"t_customerInfo\"</span>&gt;</span><br>\t\t\t\t\t\t\t<br>\t\t\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">table</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fieldset</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"admin-table-page\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"paged\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"page\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<br>   <br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"java代码：\"><a href=\"#java代码：\" class=\"headerlink\" title=\"java代码：\"></a>java代码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * shop 客户管理 list</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> start</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> limit</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> selectValue</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@ResponseBody</span><br>\t<span class=\"hljs-meta\">@RequestMapping</span>(<span class=\"hljs-string\">\"/list_shop_customers_info\"</span>)<br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">listShopCustomerInfo</span><span class=\"hljs-params\">(Integer start, Integer limit, String selectValue)</span> </span>&#123;<br>\t\tPage page = <span class=\"hljs-keyword\">new</span> Page();<br>\t\tpage.setStart(start);<br>\t\tpage.setLimit(limit);<br>\t\t<span class=\"hljs-comment\">// 获取session中的用户信息</span><br>\t\tUser u = (User) <span class=\"hljs-keyword\">this</span>.request.getSession().getAttribute(<span class=\"hljs-string\">\"userInfo\"</span>);<br>\t\t<span class=\"hljs-comment\">// 获取持久化用户对象</span><br>\t\tUser user = userService.findById(u.getUserId());<br>\t\t<span class=\"hljs-keyword\">if</span> (user != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tprojectCustomerService.findShopCustomersByUser(user, selectValue, page);<br>\t\t\t<span class=\"hljs-keyword\">return</span> page;<br>\t\t&#125;<br>\t&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"sevice层\"><a href=\"#sevice层\" class=\"headerlink\" title=\"sevice层\"></a>sevice层</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">findShopCustomersByUser</span><span class=\"hljs-params\">(User user, String selectValue, Page page)</span> </span>&#123;<br>\t\tList cmList = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t\t<span class=\"hljs-keyword\">int</span> total = <span class=\"hljs-number\">0</span>;<br>\t\t<span class=\"hljs-keyword\">if</span>(user!=<span class=\"hljs-keyword\">null</span> &amp;&amp; user.getParentId()!=<span class=\"hljs-keyword\">null</span> &amp;&amp; !user.getParentId().equals(<span class=\"hljs-string\">\"\"</span>))&#123;<br>\t\t\tString hql = <span class=\"hljs-string\">\"from ShopCustomers as model where model.shopId = \"</span> + Integer.parseInt(user.getParentId());<br>\t\t\t<span class=\"hljs-keyword\">if</span>(selectValue!=<span class=\"hljs-keyword\">null</span> &amp;&amp; !selectValue.equals(<span class=\"hljs-string\">\"\"</span>))&#123;<br>\t\t\t\thql+=<span class=\"hljs-string\">\"and model.shopCustomerName like '%\"</span> +selectValue+<span class=\"hljs-string\">\"%' or model.shopCustomerPhone like '%\"</span> +selectValue+<span class=\"hljs-string\">\"%'\"</span>;<br>\t\t\t&#125;<br>\t\t\tList&lt;ShopCustomers&gt; list = baseDao.findByHql(hql,page.getStart(),page.getLimit());<br>\t\t\t<span class=\"hljs-keyword\">for</span>(ShopCustomers sc : list)&#123;<br>\t\t\t\tUser u = (User) baseDao.loadById(User<span class=\"hljs-class\">.<span class=\"hljs-keyword\">class</span>, <span class=\"hljs-title\">sc</span>.<span class=\"hljs-title\">getUserId</span>())</span>;<br>\t\t\t\tString cGRSHql = <span class=\"hljs-string\">\"select count(*) from GuideRecords where shopCustomerId = '\"</span>+sc.getShopCustomerId()+<span class=\"hljs-string\">\"'\"</span>;<br>\t\t\t\tString cDealHql = <span class=\"hljs-string\">\"select count(*) from GuideRecords where shopCustomerId = '\"</span>+sc.getShopCustomerId()+<span class=\"hljs-string\">\"' and isDeal = 1\"</span>;<br>\t\t\t\t<span class=\"hljs-keyword\">int</span> floorCounts = baseDao.countQuery(cGRSHql);<span class=\"hljs-comment\">//备案楼盘数</span><br>\t\t\t\t<span class=\"hljs-keyword\">int</span> dealCounts = baseDao.countQuery(cDealHql);<span class=\"hljs-comment\">//已成交数</span><br>\t\t\t\tCustomerManager cm = <span class=\"hljs-keyword\">new</span> CustomerManager();<br>\t\t\t\tCustomerManager cmObj = cm.createCusManObj(sc,u);<br>\t\t\t\tcmObj.setRecords(floorCounts);<br>\t\t\t\tcmObj.setAlreadyDeal(dealCounts);<br>\t\t\t\tcmList.add(cmObj);<br>\t\t\t&#125;<br>\t\t\tString cHql = <span class=\"hljs-string\">\"select count(*) \"</span>+hql;<br>\t\t\ttotal = baseDao.countQuery(cHql);<br>\t\t&#125;<br>\t\tpage.setRoot(cmList);<br>\t\tpage.setTotal(total);<br>\t&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"分页对象\"><a href=\"#分页对象\" class=\"headerlink\" title=\"分页对象\"></a>分页对象</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> com.sc.tradmaster.utils;<br><br><span class=\"hljs-keyword\">import</span> java.util.List;<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 分页对象</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> grl 2017-01-05</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Page</span> </span>&#123;<br>\t<span class=\"hljs-comment\">/** 总记录数 */</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> total;<br>\t<span class=\"hljs-comment\">/** 分页结果 */</span><br>\t<span class=\"hljs-keyword\">private</span> List root;<br>\t<span class=\"hljs-comment\">/** 开始页码 */</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> start;<br>\t<span class=\"hljs-comment\">/** 每页多少 */</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> limit;<br>\t<span class=\"hljs-comment\">/** 查询条件 */</span><br>\t<span class=\"hljs-keyword\">private</span> String wheres;<br>\t<br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> currentPage;\t<span class=\"hljs-comment\">//当前页</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> currentResult;\t<span class=\"hljs-comment\">//当前记录起始索引</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> totalPage;\t\t<span class=\"hljs-comment\">//总页数</span><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getCurrentPage</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">if</span>(currentPage&lt;=<span class=\"hljs-number\">0</span>)<br>\t\t\tcurrentPage = <span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">return</span> currentPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCurrentPage</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> currentPage)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.currentPage = currentPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getCurrentResult</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\tcurrentResult = (getCurrentPage()-<span class=\"hljs-number\">1</span>)*getLimit();<br>\t\t<span class=\"hljs-keyword\">if</span>(currentResult&lt;<span class=\"hljs-number\">0</span>)<br>\t\t\tcurrentResult = <span class=\"hljs-number\">0</span>;<br>\t\t<span class=\"hljs-keyword\">return</span> currentResult;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCurrentResult</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> currentResult)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.currentResult = currentResult;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getTotalPage</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">if</span>(total%limit==<span class=\"hljs-number\">0</span>)<br>\t\t\ttotalPage = total/limit;<br>\t\t<span class=\"hljs-keyword\">else</span><br>\t\t\ttotalPage = total/limit+<span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">return</span> totalPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setTotalPage</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> totalPage)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.totalPage = totalPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getTotal</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> total;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setTotal</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> total)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.total = total;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> List <span class=\"hljs-title\">getRoot</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> root;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setRoot</span><span class=\"hljs-params\">(List root)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.root = root;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getStart</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> start;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setStart</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> start)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.start = start;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getLimit</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> limit;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLimit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> limit)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.limit = limit;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getWheres</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> wheres;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setWheres</span><span class=\"hljs-params\">(String wheres)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.wheres = wheres;<br>\t&#125;<br>\t<br>\t<span class=\"hljs-meta\">@Override</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">toString</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> start+<span class=\"hljs-string\">\" \"</span>+total +<span class=\"hljs-string\">\" \"</span> +root;<br>\t&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<p>如果遇到问题请联系我</p>\n","more":"<p>最近因为以为学者在看了我上一篇关于layui分页的博客遇到了问题，原因是因为使用了新版本2.x，导致有一些属性改变了，所以出了这篇新版本的博客，本文是根据上一篇博客改变而成，如有疑问请联系我 email：<a href=\"mailto:1085143002@qq.com\">1085143002@qq.com</a></p>\n<h3 id=\"完整代码：\"><a href=\"#完整代码：\" class=\"headerlink\" title=\"完整代码：\"></a>完整代码：</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">%@</span> <span class=\"hljs-attr\">page</span> <span class=\"hljs-attr\">language</span>=<span class=\"hljs-string\">\"java\"</span> <span class=\"hljs-attr\">contentType</span>=<span class=\"hljs-string\">\"text/html; charset=UTF-8\"</span> <span class=\"hljs-attr\">pageEncoding</span>=<span class=\"hljs-string\">\"UTF-8\"</span>%&gt;</span><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"en\"</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"UTF-8\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"renderer\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"webkit\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">\"X-UA-Compatible\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"IE=edge,chrome=1\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1, maximum-scale=1\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"apple-mobile-web-app-status-bar-style\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"black\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"apple-mobile-web-app-capable\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"yes\"</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"format-detection\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"telephone=no\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span>  <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"icon\"</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"static/images/titleLogo.png\"</span>  /&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>门店管理后台<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"stylesheet\"</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"static/layui/plugins/layui/css/layui.css\"</span> <span class=\"hljs-attr\">media</span>=<span class=\"hljs-string\">\"all\"</span> /&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"static/css/reset.css\"&gt;</span><br><span class=\"hljs-comment\">    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"static/css/commend.css\"&gt; --&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;link rel=\"stylesheet\" href=\"static/css/jqpagination.css\" /&gt; --&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"static/css/shopCustomerManager.css\"&gt; --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"static/js/jquery-3.1.1.min.js\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"static/layui/plugins/layui/layui.js\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- &lt;script type=\"text/javascript\" src=\"static/js/jquery.jqpagination.js\"&gt;&lt;/script&gt; --&gt;</span><br>   \t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span>&gt;</span><br><span class=\"javascript\">\t   \t$(<span class=\"hljs-built_in\">document</span>).ready(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;</span><br><span class=\"actionscript\">\t   \t\t  <span class=\"hljs-comment\">//ajax请求后台数据</span></span><br>\t\t      getShopCustomerManagePageInfo();<br>\t\t      <br>\t\t<br><span class=\"actionscript\">\t   \t\t  <span class=\"hljs-comment\">//点击搜索时 搜索数据</span></span><br><span class=\"javascript\">\t   \t\t  $(<span class=\"hljs-string\">\"#selectButton\"</span>).click(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123; </span><br>\t   \t\t\tgetShopCustomerManagePageInfo();<br><span class=\"actionscript\">\t   \t\t\tcurrentPageAllAppoint = <span class=\"hljs-number\">1</span>; <span class=\"hljs-comment\">//当点击搜索的时候，应该回到第一页</span></span><br><span class=\"actionscript\">\t   \t\t\ttoPage();<span class=\"hljs-comment\">//然后进行分页的初始化</span></span><br>\t   \t\t\t<br>\t   \t      &#125;)<br>\t   \t   toPage();<br>\t   \t&#125;);<br>\t   \t<br><span class=\"actionscript\">\t  \t<span class=\"hljs-comment\">//分页参数设置 这些全局变量关系到分页的功能</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> startAllAppoint = <span class=\"hljs-number\">0</span>;<span class=\"hljs-comment\">//开始页数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> limitAllAppoint = <span class=\"hljs-number\">10</span>;<span class=\"hljs-comment\">//每页显示数据条数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> currentPageAllAppoint = <span class=\"hljs-number\">1</span>;<span class=\"hljs-comment\">//当前页数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-keyword\">var</span> dataLength = <span class=\"hljs-number\">0</span>;<span class=\"hljs-comment\">//数据总条数</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-comment\">//ajax请求后台数据</span></span><br><span class=\"actionscript\">\t   \t<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getShopCustomerManagePageInfo</span><span class=\"hljs-params\">()</span></span>&#123;</span><br><span class=\"javascript\">\t   \t\t$.ajax(&#123;</span><br><span class=\"actionscript\">\t   \t\t\ttype:<span class=\"hljs-string\">\"post\"</span>,</span><br><span class=\"javascript\">\t   \t\t\t<span class=\"hljs-keyword\">async</span>:<span class=\"hljs-literal\">false</span>,</span><br><span class=\"actionscript\">\t   \t\t\turl:<span class=\"hljs-string\">\"list_shop_customers_info\"</span>,</span><br><span class=\"javascript\">\t   \t\t\tdata:&#123;<span class=\"hljs-attr\">start</span>:startAllAppoint, <span class=\"hljs-attr\">limit</span>:limitAllAppoint,<span class=\"hljs-attr\">selectValue</span>:$(<span class=\"hljs-string\">\"#selectValue\"</span>).val()&#125;,</span><br><span class=\"actionscript\">\t   \t\t\tsuccess:<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(data,status)</span></span>&#123;</span><br><span class=\"javascript\">\t   \t\t\t\tdata=<span class=\"hljs-built_in\">eval</span>(<span class=\"hljs-string\">\"(\"</span>+data+<span class=\"hljs-string\">\")\"</span>);</span><br>\t   \t\t\t\tgetShopCustomesInfo(data.root);<br><span class=\"actionscript\">\t   \t\t\t\tstartAllAppoint = data.currentResult;<span class=\"hljs-comment\">//当前页数(后台返回)</span></span><br><span class=\"actionscript\">\t   \t\t\t\tdataLength  = data.total;<span class=\"hljs-comment\">//数据总条数</span></span><br>\t   \t\t\t&#125;<br>\t   \t\t&#125;);<br>\t   \t\t<br>\t   \t&#125;<br>\t   \t<br>\t   <br>\t   \t<br><span class=\"actionscript\">\t   \t<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getShopCustomesInfo</span><span class=\"hljs-params\">(data)</span></span>&#123;</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\tvar s = \"<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>姓名<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>性别<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>电话<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>备案楼盘<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>已成交<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>归属经纪人<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>添加时间<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span>\";</span></span><br><span class=\"javascript\">\t   \t\t$.each(data,<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">v,o</span>)</span>&#123;</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\t\t\ts+='<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>'+o.cusName+'<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span>';</span></span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.cusSex+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.phone+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.records+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.alreadyDeal+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"actionscript\">\t   \t\t\t\ts+=<span class=\"hljs-string\">'&lt;td&gt;'</span>+o.theMedi+<span class=\"hljs-string\">'&lt;/td&gt;'</span>;</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\t\t\ts+='<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>'+o.addTime+'<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span>';</span></span><br>\t   \t\t&#125;);<br><br>\t   \t\tif(data.length&gt;0)&#123;<br><span class=\"javascript\">\t   \t\t\t$(<span class=\"hljs-string\">\"#t_customerInfo\"</span>).html(s);</span><br><span class=\"actionscript\">\t   \t\t&#125;<span class=\"hljs-keyword\">else</span>&#123;</span><br><span class=\"javascript\">\t   \t\t\t$(<span class=\"hljs-string\">\"#page1\"</span>).hide();</span><br><span class=\"handlebars\"><span class=\"xml\">\t   \t\t\t$(\"#t_customerInfo\").html(\"<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>/&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">'width:10%;height:30px;display:block;margin:0 auto;'</span>&gt;</span>暂无数据<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\");</span></span><br>\t   \t\t&#125;<br>\t   \t\t<br>\t   \t\t<br>\t   \t&#125;<br>   \t\t<br>\t   \t<br>\t   \t<br><span class=\"actionscript\">\t   \t<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toPage</span><span class=\"hljs-params\">()</span></span>&#123;</span><br>\t   \t\t<br><span class=\"actionscript\">\t   \t\tlayui.use([<span class=\"hljs-string\">'form'</span>, <span class=\"hljs-string\">'laypage'</span>, <span class=\"hljs-string\">'layedit'</span>,<span class=\"hljs-string\">'layer'</span>, <span class=\"hljs-string\">'laydate'</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span> </span>&#123;</span><br><span class=\"actionscript\">\t\t\t\t<span class=\"hljs-keyword\">var</span> form = layui.form(),</span><br>\t\t\t\t\tlayer = layui.layer,<br>\t\t\t\t\tlayedit = layui.layedit,<br>\t\t\t\t\tlaydate = layui.laydate,<br>\t\t\t\t\tlaypage = layui.laypage;<br>\t\t\t\t<br><span class=\"actionscript\">\t\t\t\t<span class=\"hljs-keyword\">var</span> nums = <span class=\"hljs-number\">10</span>;</span><br><span class=\"actionscript\">\t\t\t\t<span class=\"hljs-comment\">//调用分页</span></span><br>\t\t\t\t  laypage(&#123;<br><span class=\"actionscript\">\t\t\t\t    cont: <span class=\"hljs-string\">'paged'</span></span><br><span class=\"actionscript\">\t\t\t\t    ,count: dataLength <span class=\"hljs-comment\">//这个是后台返回的数据的总条数</span></span><br><span class=\"actionscript\">\t\t\t\t    ,limit: limitAllAppoint   <span class=\"hljs-comment\">//每页显示的数据的条数,layui会根据count，limit进行分页的计算</span></span><br>\t\t\t\t    ,curr: currentPageAllAppoint<br><span class=\"actionscript\">\t\t\t\t    ,skip: <span class=\"hljs-literal\">true</span></span><br><span class=\"actionscript\">\t\t\t\t    ,jump: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(obj, first)</span></span>&#123;</span><br>\t\t\t\t    \t<br>\t\t\t\t    \tcurrentPageAllAppoint = obj.curr;<br>\t\t\t\t    \tstartAllAppoint = (obj.curr-1)*obj.limit;<br><span class=\"actionscript\">\t\t\t\t      <span class=\"hljs-comment\">//document.getElementById('biuuu_city_list').innerHTML = render(obj, obj.curr);</span></span><br><span class=\"actionscript\">\t\t\t\t      <span class=\"hljs-keyword\">if</span>(!first)&#123; <span class=\"hljs-comment\">//一定要加此判断，否则初始时会无限刷新</span></span><br><span class=\"actionscript\">\t\t\t\t      getShopCustomerManagePageInfo();<span class=\"hljs-comment\">//一定要把翻页的ajax请求放到这里，不然会请求两次。</span></span><br><span class=\"actionscript\">\t\t\t\t          <span class=\"hljs-comment\">//location.href = '?page='+obj.curr;</span></span><br>\t\t\t\t        &#125;<br>\t\t\t\t    &#125;<br>\t\t\t\t  &#125;);<br>\t\t\t\t<br>\t\t\t\t<br>\t\t\t&#125;);<br>\t   \t&#125;;<br>\t   \t<br>   \t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"admin-main\"</span>&gt;</span><br>\t<br>\t<br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">blockquote</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-elem-quote\"</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-form\"</span> <span class=\"hljs-attr\">action</span>=<span class=\"hljs-string\">\"\"</span> &gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-form-item\"</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-input-inline\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text\"</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"selectValue\"</span> <span class=\"hljs-attr\">lay-verify</span>=<span class=\"hljs-string\">\"required\"</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"客户姓名，电话\"</span> <span class=\"hljs-attr\">autocomplete</span>=<span class=\"hljs-string\">\"off\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-input\"</span>&gt;</span><br>\t\t\t    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-btn\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"button\"</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"selectButton\"</span>&gt;</span>搜索<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"shop_customer_manager_page_info\"</span>&gt;</span>显示所有客户<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">blockquote</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fieldset</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-elem-field\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">legend</span>&gt;</span>客户列表<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">legend</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-field-box layui-form\"</span>&gt;</span><br>\t\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">table</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"layui-table admin-table\"</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"t_customerInfo\"</span>&gt;</span><br>\t\t\t\t\t\t\t<br>\t\t\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">table</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fieldset</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"admin-table-page\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"paged\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"page\"</span>&gt;</span><br>\t\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<br>   <br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"java代码：\"><a href=\"#java代码：\" class=\"headerlink\" title=\"java代码：\"></a>java代码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * shop 客户管理 list</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> start</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> limit</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> selectValue</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@ResponseBody</span><br>\t<span class=\"hljs-meta\">@RequestMapping</span>(<span class=\"hljs-string\">\"/list_shop_customers_info\"</span>)<br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">listShopCustomerInfo</span><span class=\"hljs-params\">(Integer start, Integer limit, String selectValue)</span> </span>&#123;<br>\t\tPage page = <span class=\"hljs-keyword\">new</span> Page();<br>\t\tpage.setStart(start);<br>\t\tpage.setLimit(limit);<br>\t\t<span class=\"hljs-comment\">// 获取session中的用户信息</span><br>\t\tUser u = (User) <span class=\"hljs-keyword\">this</span>.request.getSession().getAttribute(<span class=\"hljs-string\">\"userInfo\"</span>);<br>\t\t<span class=\"hljs-comment\">// 获取持久化用户对象</span><br>\t\tUser user = userService.findById(u.getUserId());<br>\t\t<span class=\"hljs-keyword\">if</span> (user != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tprojectCustomerService.findShopCustomersByUser(user, selectValue, page);<br>\t\t\t<span class=\"hljs-keyword\">return</span> page;<br>\t\t&#125;<br>\t&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"sevice层\"><a href=\"#sevice层\" class=\"headerlink\" title=\"sevice层\"></a>sevice层</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">findShopCustomersByUser</span><span class=\"hljs-params\">(User user, String selectValue, Page page)</span> </span>&#123;<br>\t\tList cmList = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t\t<span class=\"hljs-keyword\">int</span> total = <span class=\"hljs-number\">0</span>;<br>\t\t<span class=\"hljs-keyword\">if</span>(user!=<span class=\"hljs-keyword\">null</span> &amp;&amp; user.getParentId()!=<span class=\"hljs-keyword\">null</span> &amp;&amp; !user.getParentId().equals(<span class=\"hljs-string\">\"\"</span>))&#123;<br>\t\t\tString hql = <span class=\"hljs-string\">\"from ShopCustomers as model where model.shopId = \"</span> + Integer.parseInt(user.getParentId());<br>\t\t\t<span class=\"hljs-keyword\">if</span>(selectValue!=<span class=\"hljs-keyword\">null</span> &amp;&amp; !selectValue.equals(<span class=\"hljs-string\">\"\"</span>))&#123;<br>\t\t\t\thql+=<span class=\"hljs-string\">\"and model.shopCustomerName like '%\"</span> +selectValue+<span class=\"hljs-string\">\"%' or model.shopCustomerPhone like '%\"</span> +selectValue+<span class=\"hljs-string\">\"%'\"</span>;<br>\t\t\t&#125;<br>\t\t\tList&lt;ShopCustomers&gt; list = baseDao.findByHql(hql,page.getStart(),page.getLimit());<br>\t\t\t<span class=\"hljs-keyword\">for</span>(ShopCustomers sc : list)&#123;<br>\t\t\t\tUser u = (User) baseDao.loadById(User<span class=\"hljs-class\">.<span class=\"hljs-keyword\">class</span>, <span class=\"hljs-title\">sc</span>.<span class=\"hljs-title\">getUserId</span>())</span>;<br>\t\t\t\tString cGRSHql = <span class=\"hljs-string\">\"select count(*) from GuideRecords where shopCustomerId = '\"</span>+sc.getShopCustomerId()+<span class=\"hljs-string\">\"'\"</span>;<br>\t\t\t\tString cDealHql = <span class=\"hljs-string\">\"select count(*) from GuideRecords where shopCustomerId = '\"</span>+sc.getShopCustomerId()+<span class=\"hljs-string\">\"' and isDeal = 1\"</span>;<br>\t\t\t\t<span class=\"hljs-keyword\">int</span> floorCounts = baseDao.countQuery(cGRSHql);<span class=\"hljs-comment\">//备案楼盘数</span><br>\t\t\t\t<span class=\"hljs-keyword\">int</span> dealCounts = baseDao.countQuery(cDealHql);<span class=\"hljs-comment\">//已成交数</span><br>\t\t\t\tCustomerManager cm = <span class=\"hljs-keyword\">new</span> CustomerManager();<br>\t\t\t\tCustomerManager cmObj = cm.createCusManObj(sc,u);<br>\t\t\t\tcmObj.setRecords(floorCounts);<br>\t\t\t\tcmObj.setAlreadyDeal(dealCounts);<br>\t\t\t\tcmList.add(cmObj);<br>\t\t\t&#125;<br>\t\t\tString cHql = <span class=\"hljs-string\">\"select count(*) \"</span>+hql;<br>\t\t\ttotal = baseDao.countQuery(cHql);<br>\t\t&#125;<br>\t\tpage.setRoot(cmList);<br>\t\tpage.setTotal(total);<br>\t&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"分页对象\"><a href=\"#分页对象\" class=\"headerlink\" title=\"分页对象\"></a>分页对象</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> com.sc.tradmaster.utils;<br><br><span class=\"hljs-keyword\">import</span> java.util.List;<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 分页对象</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> grl 2017-01-05</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Page</span> </span>&#123;<br>\t<span class=\"hljs-comment\">/** 总记录数 */</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> total;<br>\t<span class=\"hljs-comment\">/** 分页结果 */</span><br>\t<span class=\"hljs-keyword\">private</span> List root;<br>\t<span class=\"hljs-comment\">/** 开始页码 */</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> start;<br>\t<span class=\"hljs-comment\">/** 每页多少 */</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> limit;<br>\t<span class=\"hljs-comment\">/** 查询条件 */</span><br>\t<span class=\"hljs-keyword\">private</span> String wheres;<br>\t<br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> currentPage;\t<span class=\"hljs-comment\">//当前页</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> currentResult;\t<span class=\"hljs-comment\">//当前记录起始索引</span><br>\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> totalPage;\t\t<span class=\"hljs-comment\">//总页数</span><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getCurrentPage</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">if</span>(currentPage&lt;=<span class=\"hljs-number\">0</span>)<br>\t\t\tcurrentPage = <span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">return</span> currentPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCurrentPage</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> currentPage)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.currentPage = currentPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getCurrentResult</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\tcurrentResult = (getCurrentPage()-<span class=\"hljs-number\">1</span>)*getLimit();<br>\t\t<span class=\"hljs-keyword\">if</span>(currentResult&lt;<span class=\"hljs-number\">0</span>)<br>\t\t\tcurrentResult = <span class=\"hljs-number\">0</span>;<br>\t\t<span class=\"hljs-keyword\">return</span> currentResult;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCurrentResult</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> currentResult)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.currentResult = currentResult;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getTotalPage</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">if</span>(total%limit==<span class=\"hljs-number\">0</span>)<br>\t\t\ttotalPage = total/limit;<br>\t\t<span class=\"hljs-keyword\">else</span><br>\t\t\ttotalPage = total/limit+<span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">return</span> totalPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setTotalPage</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> totalPage)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.totalPage = totalPage;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getTotal</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> total;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setTotal</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> total)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.total = total;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> List <span class=\"hljs-title\">getRoot</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> root;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setRoot</span><span class=\"hljs-params\">(List root)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.root = root;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getStart</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> start;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setStart</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> start)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.start = start;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getLimit</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> limit;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLimit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> limit)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.limit = limit;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getWheres</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> wheres;<br>\t&#125;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setWheres</span><span class=\"hljs-params\">(String wheres)</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.wheres = wheres;<br>\t&#125;<br>\t<br>\t<span class=\"hljs-meta\">@Override</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">toString</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> start+<span class=\"hljs-string\">\" \"</span>+total +<span class=\"hljs-string\">\" \"</span> +root;<br>\t&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<p>如果遇到问题请联系我</p>","categories":[{"name":"layui","path":"api/categories/layui.json"}],"tags":[{"name":"layui","path":"api/tags/layui.json"}]}